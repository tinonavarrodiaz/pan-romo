{"version":3,"names":[],"mappings":"","sources":["scripts-admin.js"],"sourcesContent":["!function e(t,n,o){function a(r,d){if(!n[r]){if(!t[r]){var c=\"function\"==typeof require&&require;if(!d&&c)return c(r,!0);if(i)return i(r,!0);var l=new Error(\"Cannot find module '\"+r+\"'\");throw l.code=\"MODULE_NOT_FOUND\",l}var s=n[r]={exports:{}};t[r][0].call(s.exports,function(e){var n=t[r][1][e];return a(n||e)},s,s.exports,e,t,n,o)}return n[r].exports}for(var i=\"function\"==typeof require&&require,r=0;r<o.length;r++)a(o[r]);return a}({1:[function(e,t,n){\"use strict\";firebase.initializeApp({apiKey:\"AIzaSyAYJ-AOjByRB6-Em-XS61ZTUPB1d82ECl8\",authDomain:\"panaderiaromo-f085b.firebaseapp.com\",databaseURL:\"https://panaderiaromo-f085b.firebaseio.com\",projectId:\"panaderiaromo-f085b\",storageBucket:\"panaderiaromo-f085b.appspot.com\",messagingSenderId:\"337438329949\"});var o=firebase.database().ref().child(\"romo-test\"),a=firebase.database(),i=document.getElementById(\"admin-products_list\"),r=firebase.storage().ref(),d=r.child(\"images\"),c=document.getElementById(\"addProduct\"),l=function(e,t){o.push({code:e.get(\"code\"),name:e.get(\"name\"),description:e.get(\"description\"),imgName:e.get(\"file\").name,urlImage:t}).then(function(e){console.log(e),alert(\"Producto agrgado con éxito\"),document.body.removeChild(modal)}).catch(function(e){return console.log(e)})},s=function(e,t){var n=e.get(\"file\"),o=d.child(n.name).put(n);o.on(\"state_changed\",function(e){},function(e){console.log(e)},function(){o.snapshot.ref.getDownloadURL().then(function(t){l(e,t)})})};document.addEventListener(\"DOMContentLoaded\",function(){document.body.classList.contains(\"Login\")?document.getElementById(\"login-form\").addEventListener(\"submit\",function(e){e.preventDefault();var t=new FormData(e.target);firebase.auth().signInWithEmailAndPassword(t.get(\"email\"),t.get(\"password\")).then(function(e){e&&(location.href=\"../admin\")}).catch(function(e){console.log(e)})}):document.body.classList.contains(\"Admin\")&&firebase.auth().onAuthStateChanged(function(e){e?(document.getElementById(\"logout\").addEventListener(\"click\",function(e){firebase.auth().signOut().then(function(){location.href=\"login.html\"}).catch(function(e){console.log(e)})}),o.on(\"child_added\",function(e){var t,n,o,a,r=document.createElement(\"li\");r.id=e.key,r.setAttribute(\"data-image\",e.val().imgName),r.innerHTML=(t=e.val(),n=e.key,o=t.code,a=t.name,'\\n    <p class=\"code\">'+o+'</p>\\n    <p class=\"name\">'+a+'</p>\\n    <p class=\"description\">'+t.description+'</p>\\n    <img src=\"'+t.urlImage+'\" alt=\"'+a+'\" width=\"100%\">\\n    <button class=\"delete\" data-id=\"'+n+'\">Borrar</button>\\n  '),i.appendChild(r)}),o.on(\"child_changed\",function(e){}),o.on(\"child_removed\",function(e){var t=document.getElementById(e.key);i.removeChild(t)}),c.addEventListener(\"submit\",function(e){e.preventDefault();var t=new FormData(e.target);console.log(t.get(\"file\")),s(t)}),document.addEventListener(\"click\",function(e){var t,n=e.target.parentElement;if(e.target.matches(\"button.edit\"),e.target.matches(\"button.delete\")){var o=n.id,i=n.dataset.image;r.child(\"images/\"+i).delete().then(function(){return a.ref(\"romo-test/\"+o).remove()}).catch(function(e){return console.log(e)})}e.target.matches(\"button.btn.btn-add-product\")&&((t=document.createElement(\"div\")).id=\"modal\",t.className=\"modal\",t.innerHTML='\\n    <div class=\"modal__container\">\\n      <div class=\"modal__close icon-close\" id=\"close\"></div>\\n        <form class=\"addProduct\" id=\"addProduct\">\\n          <div class=\"input-group modal__input-group\">\\n            <label for=\"code\">Código:</label>\\n            <input name=\"code\" id=\"code\"required>\\n          </div>\\n          <div class=\"input-group modal__input-group\">\\n            <label for=\"name\">Nombre del Producto:</label>\\n            <input name=\"name\" id=\"name\" required>\\n          </div>\\n          <div class=\"input-group modal__input-group\">\\n            <label for=\"description\">Descripción del Producto:</label>\\n            <textarea name=\"description\" id=\"description\" required></textarea>\\n          </div>\\n          <div class=\"input-group modal__input-group\">\\n            <label for=\"file\">Foto del Producto:</label>\\n            <input type=\"file\" name=\"file\" id=\"file\" required>\\n          </div>\\n          <footer class=\"modal-form-footer\">\\n            <button class=\"modal-btn-add-product\">Agregar</button>\\n          </footer>\\n        </form>\\n      </div>\\n    </div>\\n    \\n  ',document.body.appendChild(t),t.addEventListener(\"click\",function(e){var n=e.target;(n.classList.contains(\"modal\")||n.classList.contains(\"icon-close\"))&&document.body.removeChild(t)}),t.querySelector(\"form\").addEventListener(\"submit\",function(e){e.preventDefault();var t=new FormData(e.target);console.log(t.get(\"file\")),s(t)}))})):location.href=\"login.html\"})})},{}]},{},[1]);"],"file":"scripts-admin.js"}